 /*****************************************************************
 *
 * reveal.js-verticator for Reveal.js 
 * Version 1.3.0
 * 
 * @link
 * https://github.com/martinomagnifico/reveal.js-verticator
 * 
 * @author: Martijn De Jongh (Martino), martijn.de.jongh@gmail.com
 * https://github.com/martinomagnifico
 *
 * @license 
 * MIT
 * 
 * Copyright (C) 2025 Martijn De Jongh (Martino)
 *
 ******************************************************************/


(function(h,v){typeof exports=="object"&&typeof module<"u"?module.exports=v():typeof define=="function"&&define.amd?define(v):(h=typeof globalThis<"u"?globalThis:h||self,h.Verticator=v())})(this,function(){"use strict";var ke=Object.defineProperty;var Le=(h,v,E)=>v in h?ke(h,v,{enumerable:!0,configurable:!0,writable:!0,value:E}):h[v]=E;var P=(h,v,E)=>Le(h,typeof v!="symbol"?v+"":v,E);var h=typeof document<"u"?document.currentScript:null;function v(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var E,R;function J(){if(R)return E;R=1;var r=function(u){return t(u)&&!e(u)};function t(l){return!!l&&typeof l=="object"}function e(l){var u=Object.prototype.toString.call(l);return u==="[object RegExp]"||u==="[object Date]"||n(l)}var o=typeof Symbol=="function"&&Symbol.for,i=o?Symbol.for("react.element"):60103;function n(l){return l.$$typeof===i}function s(l){return Array.isArray(l)?[]:{}}function a(l,u){return u.clone!==!1&&u.isMergeableObject(l)?y(s(l),l,u):l}function c(l,u,d){return l.concat(u).map(function(S){return a(S,d)})}function g(l,u){if(!u.customMerge)return y;var d=u.customMerge(l);return typeof d=="function"?d:y}function b(l){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(l).filter(function(u){return Object.propertyIsEnumerable.call(l,u)}):[]}function $(l){return Object.keys(l).concat(b(l))}function C(l,u){try{return u in l}catch{return!1}}function k(l,u){return C(l,u)&&!(Object.hasOwnProperty.call(l,u)&&Object.propertyIsEnumerable.call(l,u))}function L(l,u,d){var S={};return d.isMergeableObject(l)&&$(l).forEach(function(m){S[m]=a(l[m],d)}),$(u).forEach(function(m){k(l,m)||(C(l,m)&&d.isMergeableObject(u[m])?S[m]=g(m,d)(l[m],u[m],d):S[m]=a(u[m],d))}),S}function y(l,u,d){d=d||{},d.arrayMerge=d.arrayMerge||c,d.isMergeableObject=d.isMergeableObject||r,d.cloneUnlessOtherwiseSpecified=a;var S=Array.isArray(u),m=Array.isArray(l),$e=S===m;return $e?S?d.arrayMerge(l,u,d):L(l,u,d):a(u,d)}y.all=function(u,d){if(!Array.isArray(u))throw new Error("first argument should be an array");return u.reduce(function(S,m){return y(S,m,d)},{})};var w=y;return E=w,E}var Q=J();const X=v(Q);var Z=Object.defineProperty,ee=(r,t,e)=>t in r?Z(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,p=(r,t,e)=>ee(r,typeof t!="symbol"?t+"":t,e);const te=()=>{const r=typeof window<"u",t=typeof document<"u",e=r&&typeof location<"u"&&/localhost|127\.0\.0\.1/.test(location.hostname);let o=!1;try{o=new Function('return typeof module !== "undefined" && !!module.hot')()}catch{}let i=!1;try{i=new Function('return typeof import.meta !== "undefined" && typeof import.meta.env !== "undefined" && import.meta.env.DEV === true')()}catch{}const n=r&&typeof navigator<"u"&&/vite|localhost|127\.0\.0\.1/.test(location.origin)&&/AppleWebKit|Chrome|Vite/.test(navigator.userAgent),s=t&&!!document.querySelector('script[type="module"]');let a=!1;try{a=new Function('return typeof process !== "undefined" && process.env && (process.env.ROLLUP_WATCH === "true" || process.env.NODE_ENV === "development")')()}catch{}let c=!1;try{c=new Function('return typeof define === "function" && !!define.amd')()}catch{}return{isDevServer:e,isWebpackHMR:o,isVite:i,isVitePreview:n,hasModuleScripts:s,isModuleBundler:a,isAMD:c,isBundlerEnvironment:o||i||n||s||a||c||e}};class re{constructor(t,e,o){p(this,"defaultConfig"),p(this,"pluginInit"),p(this,"pluginId"),p(this,"mergedConfig",null),p(this,"userConfigData",null),p(this,"data",{}),p(this,"getEnvironmentInfo",()=>te()),typeof t=="string"?(this.pluginId=t,this.pluginInit=e,this.defaultConfig=o||{}):(this.pluginId=t.id,this.pluginInit=t.init,this.defaultConfig=t.defaultConfig||{})}initializeConfig(t){const e=this.defaultConfig,o=t.getConfig()[this.pluginId]||{};this.userConfigData=o,this.mergedConfig=X(e,o,{arrayMerge:(i,n)=>n,clone:!0})}getCurrentConfig(){if(!this.mergedConfig)throw new Error("Plugin configuration has not been initialized");return this.mergedConfig}getData(){return Object.keys(this.data).length>0?this.data:void 0}get userConfig(){return this.userConfigData||{}}init(t){if(this.initializeConfig(t),this.pluginInit)return this.pluginInit(this,t,this.getCurrentConfig())}createInterface(t={}){return{id:this.pluginId,init:e=>this.init(e),getConfig:()=>this.getCurrentConfig(),getData:()=>this.getData(),...t}}}const ie=r=>{const t=document.querySelector(`script[src$="${r}.js"], script[src$="${r}.min.js"], script[src$="${r}.mjs"]`);if(t!=null&&t.src){const e=t.getAttribute("src")||"",o=e.lastIndexOf("/");if(o!==-1)return e.substring(0,o+1)}try{if(typeof{url:typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:h&&h.tagName.toUpperCase()==="SCRIPT"&&h.src||new URL("plugin/verticator/verticator.js",document.baseURI).href}<"u"&&(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:h&&h.tagName.toUpperCase()==="SCRIPT"&&h.src||new URL("plugin/verticator/verticator.js",document.baseURI).href))return(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:h&&h.tagName.toUpperCase()==="SCRIPT"&&h.src||new URL("plugin/verticator/verticator.js",document.baseURI).href).slice(0,(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:h&&h.tagName.toUpperCase()==="SCRIPT"&&h.src||new URL("plugin/verticator/verticator.js",document.baseURI).href).lastIndexOf("/")+1)}catch{}return`plugin/${r}/`},N="data-css-id",oe=(r,t)=>new Promise((e,o)=>{const i=document.createElement("link");i.rel="stylesheet",i.href=t,i.setAttribute(N,r);const n=setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i),o(new Error(`[${r}] Timeout loading CSS from: ${t}`))},5e3);i.onload=()=>{clearTimeout(n),e()},i.onerror=()=>{clearTimeout(n),i.parentNode&&i.parentNode.removeChild(i),o(new Error(`[${r}] Failed to load CSS from: ${t}`))},document.head.appendChild(i)}),U=r=>document.querySelectorAll(`[${N}="${r}"]`).length>0,se=r=>new Promise(t=>{if(e())return t(!0);setTimeout(()=>{t(e())},50);function e(){if(U(r))return!0;try{return window.getComputedStyle(document.documentElement).getPropertyValue(`--cssimported-${r}`).trim()!==""}catch{return!1}}}),_=async r=>{const{id:t,cssautoload:e=!0,csspath:o="",debug:i=!1}=r;if(e===!1||o===!1)return;if(U(t)){i&&console.log(`[${t}] CSS already loaded, skipping`);return}const n=[];typeof o=="string"&&o.trim()!==""&&n.push(o);const s=ie(t);if(s){const c=`${s}${t}.css`;n.push(c)}const a=`plugin/${t}/${t}.css`;n.push(a);for(const c of n)try{await oe(t,c);let g="CSS";o&&c===o?g="user-specified CSS":s&&c===`${s}${t}.css`?g="CSS (auto-detected from script location)":g="CSS (standard fallback)",i&&console.log(`[${t}] ${g} loaded successfully from: ${c}`);return}catch{i&&console.log(`[${t}] Failed to load CSS from: ${c}`)}console.warn(`[${t}] Could not load CSS from any location`)};async function ne(r,t){if("getEnvironmentInfo"in r&&t){const e=r,o=e.getEnvironmentInfo();if(await se(e.pluginId)){t.debug&&console.log(`[${e.pluginId}] CSS already imported, skipping`);return}if("cssautoload"in e.userConfig?t.cssautoload:!o.isBundlerEnvironment)return _({id:e.pluginId,cssautoload:!0,csspath:t.csspath,debug:t.debug});o.isBundlerEnvironment&&console.warn(`[${e.pluginId}] CSS autoloading is disabled in bundler environments. Please import the CSS manually, using import.`);return}return _(r)}class le{constructor(){p(this,"debugMode",!1),p(this,"label","DEBUG"),p(this,"groupDepth",0),p(this,"group",(...t)=>{this.debugLog("group",...t),this.groupDepth++}),p(this,"groupCollapsed",(...t)=>{this.debugLog("groupCollapsed",...t),this.groupDepth++}),p(this,"groupEnd",()=>{this.groupDepth>0&&(this.groupDepth--,this.debugLog("groupEnd"))}),p(this,"error",(...t)=>{const e=this.debugMode;this.debugMode=!0,this.formatAndLog(console.error,t),this.debugMode=e}),p(this,"table",(t,e,o)=>{if(this.debugMode)try{typeof t=="string"&&e!==void 0&&typeof e!="string"?(this.groupDepth===0?console.log(`[${this.label}]: ${t}`):console.log(t),o?console.table(e,o):console.table(e)):(this.groupDepth===0&&console.log(`[${this.label}]: Table data`),typeof e=="object"&&Array.isArray(e)?console.table(t,e):console.table(t))}catch(i){console.error(`[${this.label}]: Error showing table:`,i),console.log(`[${this.label}]: Raw data:`,t)}}),p(this,"formatAndLog",(t,e)=>{if(this.debugMode)try{this.groupDepth>0?t.call(console,...e):e.length>0&&typeof e[0]=="string"?t.call(console,`[${this.label}]: ${e[0]}`,...e.slice(1)):t.call(console,`[${this.label}]:`,...e)}catch(o){console.error(`[${this.label}]: Error in logging:`,o),console.log(`[${this.label}]: Original log data:`,...e)}})}initialize(t,e="DEBUG"){this.debugMode=t,this.label=e}debugLog(t,...e){const o=console[t];if(!this.debugMode&&t!=="error"||typeof o!="function")return;const i=o;if(t==="group"||t==="groupCollapsed"){e.length>0&&typeof e[0]=="string"?i.call(console,`[${this.label}]: ${e[0]}`,...e.slice(1)):i.call(console,`[${this.label}]:`,...e);return}if(t==="groupEnd"){i.call(console);return}if(t==="table"){e.length===1?this.table(e[0]):e.length===2?typeof e[0]=="string"?this.table(e[0],e[1]):this.table(e[0],e[1]):e.length>=3&&this.table(e[0],e[1],e[2]);return}this.groupDepth>0?i.call(console,...e):e.length>0&&typeof e[0]=="string"?i.call(console,`[${this.label}]: ${e[0]}`,...e.slice(1)):i.call(console,`[${this.label}]:`,...e)}}const ae=r=>new Proxy(r,{get:(t,e)=>{if(e in t)return t[e];const o=e.toString();if(typeof console[o]=="function")return(...i)=>{t.debugLog(o,...i)}}}),j=ae(new le),F=r=>{let[t,e]=[0,0];r.on("slidechanged",o=>{const{indexh:i,indexv:n,previousSlide:s,currentSlide:a}=o;i!==t&&r.dispatchEvent({type:"slidechanged-h",data:{previousSlide:s,currentSlide:a,indexh:i,indexv:n}}),n!==e&&i===t&&r.dispatchEvent({type:"slidechanged-v",data:{previousSlide:s,currentSlide:a,indexh:i,indexv:n}}),[t,e]=[i,n]})},ce=F,ue=r=>{const t=r.getViewportElement();if(!t)return console.warn("[verticator]: Could not find viewport element"),()=>{};const e=()=>t.classList.contains("reveal-scroll");let o=e(),i=!0;const n=new MutationObserver(()=>{if(!i)return;const s=e();if(s!==o){const a=r.getCurrentSlide(),c=r.getIndices(),g=c.h,b=c.v,$=s?"scrollmode-enter":"scrollmode-exit";r.dispatchEvent({type:$,data:{currentSlide:a,previousSlide:null,indexh:g,indexv:b}}),o=s}});return n.observe(t,{attributes:!0,attributeFilter:["class"]}),()=>{i=!1,n.disconnect()}},I=r=>r instanceof HTMLElement&&r.tagName==="SECTION",O=r=>I(r)?Array.from(r.children).some(t=>t instanceof HTMLElement&&t.tagName==="SECTION"):!1,T=r=>I(r)?r.parentElement instanceof HTMLElement&&r.parentElement.tagName==="SECTION":!1,de=r=>I(r)&&!T(r)&&!O(r),he=r=>{if(!I(r))return null;if(T(r)){const t=r.parentElement;if(t instanceof HTMLElement&&O(t))return t}return null},fe=r=>I(r)?T(r)?"vertical":O(r)?"stack":"horizontal":"invalid",V=Object.freeze(Object.defineProperty({__proto__:null,addDirectionEvents:F,addMoreDirectionEvents:ce,addScrollModeEvents:ue,getSectionType:fe,getStack:he,isHorizontal:de,isSection:I,isStack:O,isVertical:T},Symbol.toStringTag,{value:"Module"})),ge={themetag:"h1",color:"",inversecolor:"",skipuncounted:!1,clickable:!0,position:"auto",offset:"3vmin",autogenerate:!0,tooltip:!1,scale:1,cssautoload:!0,csspath:"",plaintextonly:!1},f={lightClass:"has-light-background",darkClass:"has-dark-background",themeColorVar:"--c-theme-color",vertiColorVar:"--v-color",forceColorVar:"--v-forcecolor",activeclass:"active"},pe=(r,t)=>{const e={theme:"",regular:"",inverse:""},o=document.createElement("section"),i=document.createElement(t);return r.getElementsByClassName("slides")[0].appendChild(o).appendChild(i),e.regular=getComputedStyle(i).getPropertyValue("color"),o.classList.add(f.lightClass),e.inverse=getComputedStyle(i).getPropertyValue("color"),e.regular===e.inverse?(e.theme="light",o.classList.remove(f.lightClass),o.classList.add(f.darkClass),e.inverse=getComputedStyle(i).getPropertyValue("color")):e.theme="dark",o.remove(),e},B=(r,t,e)=>{const o={theme:"",themeregular:"",themeinverse:"",verticatorregular:"",verticatorinverse:""},i=pe(t,e.themetag?e.themetag:"section");return o.theme=i.theme,o.themeregular=i.regular,o.themeinverse=i.inverse,o.verticatorregular=e.color?e.color:i.regular,o.verticatorinverse=e.inversecolor?e.inversecolor:e.oppositecolor?e.oppositecolor:i.inverse,e.debug&&(console.log(`Theme regular color is: "${o.themeregular}"`),console.log(`Theme inverse color is: "${o.themeinverse}"`),e.color&&console.log(`Verticator regular color is: "${o.verticatorregular}"`),(e.inversecolor||e.oppositecolor)&&console.log(`Verticator inverse color is: "${o.verticatorinverse}"`)),e.color&&r.style.setProperty(f.vertiColorVar,o.verticatorregular),o},z=r=>r.getConfig().hashOneBasedIndex?1:0,x=(r,t,e)=>{const o=z(e),i=Array.from(t.querySelectorAll("li"));let n=o-1;for(let s=0;s<i.length;s++){const a=i[s];Number.parseInt(a.dataset.index||"0",10)<=(r.indexv||0)+o&&(n=s),a.classList.remove(f.activeclass)}n>=0&&n<i.length&&i[n].classList.add(f.activeclass)},A=(r,t,e,o,i)=>{const n=e.getRevealElement(),s=r.currentSlide.parentNode;s.classList.contains("stack")&&(s.classList.contains(f.lightClass)?n.classList.add("lightstack"):n.classList.remove("lightstack"),s.classList.contains(f.darkClass)?n.classList.add("darkstack"):n.classList.remove("darkstack"));const a=r.currentSlide.dataset.verticator,c=s.dataset.verticator;if(a||c)if(a==="regular"||c==="regular")t.style.setProperty(f.forceColorVar,o.verticatorregular),i.debug&&console.log(`Verticator forced to: "${o.verticatorregular}"`);else if(a==="inverse"||c==="inverse")t.style.setProperty(f.forceColorVar,o.verticatorinverse),i.debug&&console.log(`Verticator forced to: "${o.verticatorinverse}"`);else{const g=a??c??"";t.style.setProperty(f.forceColorVar,g),i.debug&&console.log(`Verticator forced to: "${g}"`)}else t.style.removeProperty(f.forceColorVar)},M=(r,t,e,o,i)=>{r?(o.style.setProperty(f.themeColorVar,e.themeinverse),t.inversecolor||t.oppositecolor?i.style.setProperty(f.vertiColorVar,e.verticatorinverse):i.style.removeProperty(f.vertiColorVar)):(o.style.setProperty(f.themeColorVar,e.themeregular),t.color?i.style.setProperty(f.vertiColorVar,e.verticatorregular):i.style.removeProperty(f.vertiColorVar))},me=(r,t,e,o)=>{const i=t.getRevealElement(),n=t.getViewportElement(),s={dark:i.classList.contains(f.darkClass),light:i.classList.contains(f.lightClass),darkParent:i.classList.contains("darkstack"),lightParent:i.classList.contains("lightstack")},a=new MutationObserver(g=>{for(const b of g){const{target:$}=b;if(b.attributeName==="class"){const C=l=>$.classList.contains(l),k=C(f.lightClass),L=C(f.darkClass),y=C("lightstack"),w=C("darkstack");k||L?(s.dark!==L||s.light!==k)&&(e.theme==="dark"&&s.light!==k&&(s.light=k,M(k,o,e,i,r)),e.theme==="light"&&s.dark!==L&&(s.dark=L,M(L,o,e,i,r))):y||w?(s.darkParent!==w||s.lightParent!==y)&&(e.theme==="dark"&&s.lightParent!==y&&(s.lightParent=y,M(y,o,e,i,r)),e.theme==="light"&&s.darkParent!==w&&(s.darkParent=w,M(w,o,e,i,r))):(s.dark=!1,s.light=!1,M(!1,o,e,i,r))}}});(()=>{n.classList.contains("reveal-scroll")?a.observe(n,{attributes:!0,attributeFilter:["class"]}):a.observe(i,{attributes:!0,attributeFilter:["class"]})})()},ve=(r,t)=>{const e=r.getRevealElement();let o=e.querySelector("ul.verticator");return!o&&t.autogenerate&&(o=document.createElement("ul"),o.classList.add("verticator"),t.clickable||o.classList.add("no-click"),e.insertBefore(o,e.childNodes[0])),o},q=(r,t,e)=>{let o=e.position;o==="auto"&&(o=r.getConfig().rtl?"left":"right"),o==="left"?(t.classList.add("left"),t.style.left=e.offset):t.style.right=e.offset;let i=e.scale;i=i>2?2:i<.5?.5:i;let n=r.getScale(),s=n>1?n*i:i;H(t,s),r.on("resize",a=>{const c=a;a&&typeof c.scale=="number"&&(n=c.scale,s=n>1?n*i:i,H(t,s))})},H=(r,t)=>{r.style.setProperty("--verticator-scale",t.toFixed(2));const e=1/Math.sqrt(t);r.style.setProperty("--verticator-tooltip-scale",e.toFixed(2))},ye=(r,t,e,o,i)=>{j.log(i,`Creating ${e.length} bullets`);const n=z(o);t.classList.remove("visible");let s="";for(const a of e){const c=a[0],g=a[1],b=`href="#/${r.indexh+n}/${c+n}"`,$=g?`data-name="${g}"`:"",C=g?`<div class="tooltip"><span>${g}</span></div>`:"";s+=`<li data-index="${c+n}"><a ${i.clickable?b:""}${$}></a>${C}</li>`}t.innerHTML=`<div class="verticator-holder">${s}</div>`,x(r,t,o),setTimeout(()=>{t.classList.add("visible")},300)},be=V.getStack,G=r=>{const t=["data-verticator-tooltip","data-name","title"];for(const o of t){const i=r.getAttribute(o);if(i)return i}const e=["h1","h2","h3","h4"];for(const o of e){const i=r.querySelector(o);if(i!=null&&i.textContent)return i.textContent}return null},Se=(r,t)=>r.dataset.verticatorTooltip==="none"||r.dataset.verticatorTooltip==="false"||r.classList.contains("no-verticator-tooltip")?null:t.tooltip===!0?G(r):typeof t.tooltip=="string"?t.tooltip==="auto"||t.tooltip==="true"?G(r):r.getAttribute(t.tooltip)||null:null,Ce=(r,t)=>{const e=be(r);return e?Array.from(e.children).map((a,c)=>[c,a]).filter(a=>{const c=a[1];return!(t.skipuncounted===!0&&c.getAttribute("data-visibility")==="uncounted")}).map(a=>{const[c,g]=a;let b=null;return t.tooltip&&(b=Se(g,t)),[c,b]}):[]},W=V.getStack,K=(r,t,e,o)=>{if(r.type==="resize"){r.currentSlide=t.getCurrentSlide();const c=t.getIndices();r.indexv=c.v}const i=r.currentSlide,n=Ce(i,o);if(n.length<2){e.classList.remove("visible"),e.innerHTML="";return}const s=W(i),a=r.previousSlide?W(r.previousSlide):null;!r.previousSlide||s!==a?ye(r,e,n,t,o):x(r,e,t)};class D{constructor(t,e){P(this,"deck");P(this,"config");P(this,"colors");P(this,"theVerticator",null);P(this,"currentSlide",null);this.deck=t,this.config=e,this.colors={theme:"",themeregular:"",themeinverse:"",verticatorregular:"",verticatorinverse:""}}static async create(t,e){await new D(t,e).initialize()}async initialize(){this.setupVerticator(),this.theVerticator&&(this.colors=B(this.theVerticator,this.deck.getRevealElement(),this.config),q(this.deck,this.theVerticator,this.config),me(this.theVerticator,this.deck,this.colors,this.config),V.addMoreDirectionEvents(this.deck),V.addScrollModeEvents(this.deck),this.addEventListeners())}setupVerticator(){this.theVerticator=ve(this.deck,this.config);const t=this.deck.getRevealElement();this.theVerticator&&(B(this.theVerticator,t,this.config),q(this.deck,this.theVerticator,this.config))}addEventListeners(){this.deck.on("slidechanged-h",t=>{if(!this.theVerticator)return;const e=t;e.currentSlide!==this.currentSlide&&(K(e,this.deck,this.theVerticator,this.config),A(e,this.theVerticator,this.deck,this.colors,this.config),this.currentSlide=e.currentSlide)}),this.deck.on("slidechanged-v",t=>{if(!this.theVerticator)return;const e=t;e.currentSlide!==this.currentSlide&&(x(e,this.theVerticator,this.deck),A(e,this.theVerticator,this.deck,this.colors,this.config),this.currentSlide=e.currentSlide)}),this.deck.on("scrollmode-exit",t=>{if(!this.theVerticator)return;const e=t;K(e,this.deck,this.theVerticator,this.config),A(e,this.theVerticator,this.deck,this.colors,this.config),this.currentSlide=e.currentSlide})}}const Y="verticator",Ee=async(r,t,e)=>{j&&e.debug&&j.initialize(!0,Y),await ne(r,e),await D.create(t,e)};return()=>new re(Y,Ee,ge).createInterface()});
