 /*****************************************************************
 *
 * reveal.js-verticator for Reveal.js 
 * Version 1.3.1
 * 
 * @link
 * https://github.com/martinomagnifico/reveal.js-verticator
 * 
 * @author: Martijn De Jongh (Martino), martijn.de.jongh@gmail.com
 * https://github.com/martinomagnifico
 *
 * @license 
 * MIT
 * 
 * Copyright (C) 2026 Martijn De Jongh (Martino)
 *
 ******************************************************************/


(function(g,I){typeof exports=="object"&&typeof module<"u"?module.exports=I():typeof define=="function"&&define.amd?define(I):(g=typeof globalThis<"u"?globalThis:g||self,g.Verticator=I())})(this,(function(){"use strict";var g=typeof document<"u"?document.currentScript:null;const I={themetag:"h1",color:"",inversecolor:"",skipuncounted:!1,clickable:!0,position:"auto",offset:"3vmin",autogenerate:!0,tooltip:!1,scale:1,cssautoload:!0,csspath:"",plaintextonly:!1};function J(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var O,D;function Q(){if(D)return O;D=1;var r=function(c){return t(c)&&!e(c)};function t(l){return!!l&&typeof l=="object"}function e(l){var c=Object.prototype.toString.call(l);return c==="[object RegExp]"||c==="[object Date]"||s(l)}var i=typeof Symbol=="function"&&Symbol.for,o=i?Symbol.for("react.element"):60103;function s(l){return l.$$typeof===o}function n(l){return Array.isArray(l)?[]:{}}function a(l,c){return c.clone!==!1&&c.isMergeableObject(l)?m(n(l),l,c):l}function u(l,c,d){return l.concat(c).map(function(y){return a(y,d)})}function h(l,c){if(!c.customMerge)return m;var d=c.customMerge(l);return typeof d=="function"?d:m}function v(l){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(l).filter(function(c){return Object.propertyIsEnumerable.call(l,c)}):[]}function S(l){return Object.keys(l).concat(v(l))}function b(l,c){try{return c in l}catch{return!1}}function E(l,c){return b(l,c)&&!(Object.hasOwnProperty.call(l,c)&&Object.propertyIsEnumerable.call(l,c))}function $(l,c,d){var y={};return d.isMergeableObject(l)&&S(l).forEach(function(p){y[p]=a(l[p],d)}),S(c).forEach(function(p){E(l,p)||(b(l,p)&&d.isMergeableObject(c[p])?y[p]=h(p,d)(l[p],c[p],d):y[p]=a(c[p],d))}),y}function m(l,c,d){d=d||{},d.arrayMerge=d.arrayMerge||u,d.isMergeableObject=d.isMergeableObject||r,d.cloneUnlessOtherwiseSpecified=a;var y=Array.isArray(c),p=Array.isArray(l),Ee=y===p;return Ee?y?d.arrayMerge(l,c,d):$(l,c,d):a(c,d)}m.all=function(c,d){if(!Array.isArray(c))throw new Error("first argument should be an array");return c.reduce(function(y,p){return m(y,p,d)},{})};var k=m;return O=k,O}var X=Q();const ee=J(X);let P=null;const te=()=>{if(P)return P;const r=typeof window<"u",t=typeof document<"u";let e=!1;try{const o=new Function('return typeof module !== "undefined" && !!module.hot')(),s=new Function('return typeof import.meta !== "undefined" && !!import.meta.hot')();e=o||s}catch{}let i=!1;try{i=new Function('return typeof import.meta !== "undefined" && import.meta.env?.DEV === true')()}catch{}return P={isDevelopment:e||i,hasHMR:e,isViteDev:i,hasWindow:r,hasDocument:t},P};class re{defaultConfig;pluginInit;pluginId;mergedConfig=null;userConfigData=null;data={};constructor(t,e,i){typeof t=="string"?(this.pluginId=t,this.pluginInit=e,this.defaultConfig=i||{}):(this.pluginId=t.id,this.pluginInit=t.init,this.defaultConfig=t.defaultConfig||{})}initializeConfig(t){const e=this.defaultConfig,i=t.getConfig()[this.pluginId]||{};this.userConfigData=i,this.mergedConfig=ee(e,i,{arrayMerge:(o,s)=>s,clone:!0})}getCurrentConfig(){if(!this.mergedConfig)throw new Error("Plugin configuration has not been initialized");return this.mergedConfig}getData(){return Object.keys(this.data).length>0?this.data:void 0}get userConfig(){return this.userConfigData||{}}getEnvironmentInfo=()=>te();init(t){if(this.initializeConfig(t),this.pluginInit)return this.pluginInit(this,t,this.getCurrentConfig())}createInterface(t={}){return{id:this.pluginId,init:e=>this.init(e),getConfig:()=>this.getCurrentConfig(),getData:()=>this.getData(),...t}}}const ie=r=>{const t=document.querySelector(`script[src$="${r}.js"], script[src$="${r}.min.js"], script[src$="${r}.mjs"]`);if(t?.src){const e=t.getAttribute("src")||"",i=e.lastIndexOf("/");if(i!==-1)return e.substring(0,i+1)}try{if(typeof{url:typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:g&&g.tagName.toUpperCase()==="SCRIPT"&&g.src||new URL("plugin/verticator/verticator.js",document.baseURI).href}<"u"&&(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:g&&g.tagName.toUpperCase()==="SCRIPT"&&g.src||new URL("plugin/verticator/verticator.js",document.baseURI).href))return(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:g&&g.tagName.toUpperCase()==="SCRIPT"&&g.src||new URL("plugin/verticator/verticator.js",document.baseURI).href).slice(0,(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:g&&g.tagName.toUpperCase()==="SCRIPT"&&g.src||new URL("plugin/verticator/verticator.js",document.baseURI).href).lastIndexOf("/")+1)}catch{}return`plugin/${r}/`},R="data-css-id",oe=(r,t)=>new Promise((e,i)=>{const o=document.createElement("link");o.rel="stylesheet",o.href=t,o.setAttribute(R,r);const s=setTimeout(()=>{o.parentNode&&o.parentNode.removeChild(o),i(new Error(`[${r}] Timeout loading CSS from: ${t}`))},5e3);o.onload=()=>{clearTimeout(s),e()},o.onerror=()=>{clearTimeout(s),o.parentNode&&o.parentNode.removeChild(o),i(new Error(`[${r}] Failed to load CSS from: ${t}`))},document.head.appendChild(o)}),j=r=>document.querySelectorAll(`[${R}="${r}"]`).length>0,se=r=>new Promise(t=>{if(e())return t(!0);setTimeout(()=>{t(e())},50);function e(){if(j(r))return!0;try{return window.getComputedStyle(document.documentElement).getPropertyValue(`--cssimported-${r}`).trim()!==""}catch{return!1}}}),N=async r=>{const{id:t,cssautoload:e=!0,csspath:i="",debug:o=!1}=r;if(e===!1||i===!1)return;if(j(t)&&!(typeof i=="string"&&i.trim()!=="")){o&&console.log(`[${t}] CSS is already loaded, skipping`);return}j(t)&&typeof i=="string"&&i.trim()!==""&&o&&console.log(`[${t}] CSS is already loaded, also loading user-specified path: ${i}`);const s=[];typeof i=="string"&&i.trim()!==""&&s.push(i);const n=ie(t);if(n){const u=`${n}${t}.css`;s.push(u)}const a=`plugin/${t}/${t}.css`;s.push(a);for(const u of s)try{await oe(t,u);let h="CSS";i&&u===i?h="user-specified CSS":n&&u===`${n}${t}.css`?h="CSS (auto-detected from script location)":h="CSS (standard fallback)",o&&console.log(`[${t}] ${h} loaded successfully from: ${u}`);return}catch{o&&console.log(`[${t}] Failed to load CSS from: ${u}`)}console.warn(`[${t}] Could not load CSS from any location`)};async function ne(r,t){if("getEnvironmentInfo"in r&&t){const e=r,i=e.getEnvironmentInfo();if(await se(e.pluginId)&&!(typeof t.csspath=="string"&&t.csspath.trim()!=="")){t.debug&&console.log(`[${e.pluginId}] CSS is already imported, skipping`);return}if("cssautoload"in e.userConfig?t.cssautoload:!i.isDevelopment)return N({id:e.pluginId,cssautoload:!0,csspath:t.csspath,debug:t.debug});i.isDevelopment&&console.warn(`[${e.pluginId}] CSS autoloading is disabled in bundler environments. Please import the CSS manually, using import.`);return}return N(r)}class le{debugMode=!1;label="DEBUG";groupDepth=0;initialize(t,e="DEBUG"){this.debugMode=t,this.label=e}group=(...t)=>{this.debugLog("group",...t),this.groupDepth++};groupCollapsed=(...t)=>{this.debugLog("groupCollapsed",...t),this.groupDepth++};groupEnd=()=>{this.groupDepth>0&&(this.groupDepth--,this.debugLog("groupEnd"))};error=(...t)=>{const e=this.debugMode;this.debugMode=!0,this.formatAndLog(console.error,t),this.debugMode=e};table=(t,e,i)=>{if(this.debugMode)try{typeof t=="string"&&e!==void 0&&typeof e!="string"?(this.groupDepth===0?console.log(`[${this.label}]: ${t}`):console.log(t),i?console.table(e,i):console.table(e)):(this.groupDepth===0&&console.log(`[${this.label}]: Table data`),typeof e=="object"&&Array.isArray(e)?console.table(t,e):console.table(t))}catch(o){console.error(`[${this.label}]: Error showing table:`,o),console.log(`[${this.label}]: Raw data:`,t)}};formatAndLog=(t,e)=>{if(this.debugMode)try{this.groupDepth>0?t.call(console,...e):e.length>0&&typeof e[0]=="string"?t.call(console,`[${this.label}]: ${e[0]}`,...e.slice(1)):t.call(console,`[${this.label}]:`,...e)}catch(i){console.error(`[${this.label}]: Error in logging:`,i),console.log(`[${this.label}]: Original log data:`,...e)}};debugLog(t,...e){const i=console[t];if(!this.debugMode&&t!=="error"||typeof i!="function")return;const o=i;if(t==="group"||t==="groupCollapsed"){e.length>0&&typeof e[0]=="string"?o.call(console,`[${this.label}]: ${e[0]}`,...e.slice(1)):o.call(console,`[${this.label}]:`,...e);return}if(t==="groupEnd"){o.call(console);return}if(t==="table"){e.length===1?this.table(e[0]):e.length===2?typeof e[0]=="string"?this.table(e[0],e[1]):this.table(e[0],e[1]):e.length>=3&&this.table(e[0],e[1],e[2]);return}this.groupDepth>0?o.call(console,...e):e.length>0&&typeof e[0]=="string"?o.call(console,`[${this.label}]: ${e[0]}`,...e.slice(1)):o.call(console,`[${this.label}]:`,...e)}}const ae=r=>new Proxy(r,{get:(t,e)=>{if(e in t)return t[e];const i=e.toString();if(typeof console[i]=="function")return(...o)=>{t.debugLog(i,...o)}}}),C=ae(new le),U=r=>{let[t,e]=[0,0];r.on("slidechanged",i=>{const{indexh:o,indexv:s,previousSlide:n,currentSlide:a}=i;o!==t&&r.dispatchEvent({type:"slidechanged-h",data:{previousSlide:n,currentSlide:a,indexh:o,indexv:s}}),s!==e&&o===t&&r.dispatchEvent({type:"slidechanged-v",data:{previousSlide:n,currentSlide:a,indexh:o,indexv:s}}),[t,e]=[o,s]})},ce=U,ue=r=>{const t=r.getViewportElement();if(!t)return console.warn("[verticator]: Could not find viewport element"),()=>{};const e=()=>t.classList.contains("reveal-scroll");let i=e(),o=!0;const s=new MutationObserver(()=>{if(!o)return;const n=e();if(n!==i){const a=r.getCurrentSlide(),u=r.getIndices(),h=u.h,v=u.v,S=n?"scrollmode-enter":"scrollmode-exit";r.dispatchEvent({type:S,data:{currentSlide:a,previousSlide:null,indexh:h,indexv:v}}),i=n}});return s.observe(t,{attributes:!0,attributeFilter:["class"]}),()=>{o=!1,s.disconnect()}},_=Object.freeze(Object.defineProperty({__proto__:null,addDirectionEvents:U,addMoreDirectionEvents:ce,addScrollModeEvents:ue},Symbol.toStringTag,{value:"Module"}));var z=(r=>(r.HORIZONTAL="horizontal",r.STACK="stack",r.VERTICAL="vertical",r.INVALID="invalid",r))(z||{});const L=r=>r instanceof HTMLElement&&r.tagName==="SECTION",T=r=>L(r)?Array.from(r.children).some(t=>t instanceof HTMLElement&&t.tagName==="SECTION"):!1,M=r=>L(r)?r.parentElement instanceof HTMLElement&&r.parentElement.tagName==="SECTION":!1,de=r=>L(r)&&!M(r)&&!T(r),fe=r=>{if(!L(r))return null;if(M(r)){const t=r.parentElement;if(t instanceof HTMLElement&&T(t))return t}return null},he=r=>L(r)?M(r)?"vertical":T(r)?"stack":"horizontal":"invalid",F=Object.freeze(Object.defineProperty({__proto__:null,SectionType:z,getSectionType:he,getStack:fe,isHorizontal:de,isSection:L,isStack:T,isVertical:M},Symbol.toStringTag,{value:"Module"})),f={lightClass:"has-light-background",darkClass:"has-dark-background",themeColorVar:"--c-theme-color",vertiColorVar:"--v-color",forceColorVar:"--v-forcecolor",activeclass:"active"},q=r=>r.getConfig().hashOneBasedIndex?1:0,V=(r,t,e)=>{const i=q(e),o=Array.from(t.querySelectorAll("li"));let s=i-1;for(let n=0;n<o.length;n++){const a=o[n];Number.parseInt(a.dataset.index||"0",10)<=(r.indexv||0)+i&&(s=n),a.classList.remove(f.activeclass)}s>=0&&s<o.length&&o[s].classList.add(f.activeclass)},x=(r,t,e,i,o)=>{const s=e.getRevealElement(),n=r.currentSlide.parentNode;n.classList.contains("stack")&&(n.classList.contains(f.lightClass)?s.classList.add("lightstack"):s.classList.remove("lightstack"),n.classList.contains(f.darkClass)?s.classList.add("darkstack"):s.classList.remove("darkstack"));const a=r.currentSlide.dataset.verticator,u=n.dataset.verticator;if(a||u)if(a==="regular"||u==="regular")t.style.setProperty(f.forceColorVar,i.verticatorregular),o.debug&&console.log(`Verticator forced to: "${i.verticatorregular}"`);else if(a==="inverse"||u==="inverse")t.style.setProperty(f.forceColorVar,i.verticatorinverse),o.debug&&console.log(`Verticator forced to: "${i.verticatorinverse}"`);else{const h=a??u??"";t.style.setProperty(f.forceColorVar,h),o.debug&&console.log(`Verticator forced to: "${h}"`)}else t.style.removeProperty(f.forceColorVar)},w=(r,t,e,i,o)=>{r?(i.style.setProperty(f.themeColorVar,e.themeinverse),t.inversecolor||t.oppositecolor?o.style.setProperty(f.vertiColorVar,e.verticatorinverse):o.style.removeProperty(f.vertiColorVar)):(i.style.setProperty(f.themeColorVar,e.themeregular),t.color?o.style.setProperty(f.vertiColorVar,e.verticatorregular):o.style.removeProperty(f.vertiColorVar))},ge=(r,t,e,i)=>{const o=t.getRevealElement(),s=t.getViewportElement(),n={dark:o.classList.contains(f.darkClass),light:o.classList.contains(f.lightClass),darkParent:o.classList.contains("darkstack"),lightParent:o.classList.contains("lightstack")},a=new MutationObserver(h=>{for(const v of h){const{target:S}=v;if(v.attributeName==="class"){const b=l=>S.classList.contains(l),E=b(f.lightClass),$=b(f.darkClass),m=b("lightstack"),k=b("darkstack");E||$?(n.dark!==$||n.light!==E)&&(e.theme==="dark"&&n.light!==E&&(n.light=E,w(E,i,e,o,r)),e.theme==="light"&&n.dark!==$&&(n.dark=$,w($,i,e,o,r))):m||k?(n.darkParent!==k||n.lightParent!==m)&&(e.theme==="dark"&&n.lightParent!==m&&(n.lightParent=m,w(m,i,e,o,r)),e.theme==="light"&&n.darkParent!==k&&(n.darkParent=k,w(k,i,e,o,r))):(n.dark=!1,n.light=!1,w(!1,i,e,o,r))}}});s.classList.contains("reveal-scroll")?a.observe(s,{attributes:!0,attributeFilter:["class"]}):a.observe(o,{attributes:!0,attributeFilter:["class"]})},pe=(r,t)=>{const e={theme:"",regular:"",inverse:""},i=document.createElement("section"),o=document.createElement(t);return r.getElementsByClassName("slides")[0].appendChild(i).appendChild(o),e.regular=getComputedStyle(o).getPropertyValue("color"),i.classList.add(f.lightClass),e.inverse=getComputedStyle(o).getPropertyValue("color"),e.regular===e.inverse?(e.theme="light",i.classList.remove(f.lightClass),i.classList.add(f.darkClass),e.inverse=getComputedStyle(o).getPropertyValue("color")):e.theme="dark",i.remove(),e},H=(r,t,e)=>{const i={theme:"",themeregular:"",themeinverse:"",verticatorregular:"",verticatorinverse:""},o=pe(t,e.themetag?e.themetag:"section");return i.theme=o.theme,i.themeregular=o.regular,i.themeinverse=o.inverse,i.verticatorregular=e.color?e.color:o.regular,i.verticatorinverse=e.inversecolor?e.inversecolor:e.oppositecolor?e.oppositecolor:o.inverse,C.log(`Theme regular color is: "${i.themeregular}"`),C.log(`Theme inverse color is: "${i.themeinverse}"`),e.color&&C.log(`Verticator regular color is: "${i.verticatorregular}"`),(e.inversecolor||e.oppositecolor)&&C.log(`Verticator inverse color is: "${i.verticatorinverse}"`),e.color&&r.style.setProperty(f.vertiColorVar,i.verticatorregular),i},me=(r,t)=>{const e=r.getRevealElement();let i=e.querySelector("ul.verticator");return!i&&t.autogenerate&&(i=document.createElement("ul"),i.classList.add("verticator"),t.clickable||i.classList.add("no-click"),e.insertBefore(i,e.childNodes[0])),i},B=(r,t,e)=>{let i=e.position;i==="auto"&&(i=r.getConfig().rtl?"left":"right"),i==="left"?(t.classList.add("left"),t.style.left=e.offset):t.style.right=e.offset;let o=e.scale;o=o>2?2:o<.5?.5:o;let s=r.getScale(),n=s>1?s*o:o;G(t,n),r.on("resize",a=>{const u=a;a&&typeof u.scale=="number"&&(s=u.scale,n=s>1?s*o:o,G(t,n))})},G=(r,t)=>{r.style.setProperty("--verticator-scale",t.toFixed(2));const e=1/Math.sqrt(t);r.style.setProperty("--verticator-tooltip-scale",e.toFixed(2))},ve=(r,t,e,i,o)=>{C.log(o,`Creating ${e.length} bullets`);const s=q(i);t.classList.remove("visible");let n="";for(const a of e){const u=a[0],h=a[1],v=`href="#/${r.indexh+s}/${u+s}"`,S=h?`data-name="${h}"`:"",b=h?`<div class="tooltip"><span>${h}</span></div>`:"";n+=`<li data-index="${u+s}"><a ${o.clickable?v:""}${S}></a>${b}</li>`}t.innerHTML=`<div class="verticator-holder">${n}</div>`,V(r,t,i),setTimeout(()=>{t.classList.add("visible")},300)},ye=F.getStack,K=r=>{const t=["data-verticator-tooltip","data-name","title"];for(const i of t){const o=r.getAttribute(i);if(o)return o}const e=["h1","h2","h3","h4"];for(const i of e){const o=r.querySelector(i);if(o?.textContent)return o.textContent}return null},be=(r,t)=>r.dataset.verticatorTooltip==="none"||r.dataset.verticatorTooltip==="false"||r.classList.contains("no-verticator-tooltip")?null:t.tooltip===!0?K(r):typeof t.tooltip=="string"?t.tooltip==="auto"||t.tooltip==="true"?K(r):r.getAttribute(t.tooltip)||null:null,Se=(r,t)=>{const e=ye(r);return e?Array.from(e.children).map((a,u)=>[u,a]).filter(a=>{const u=a[1];return!(t.skipuncounted===!0&&u.getAttribute("data-visibility")==="uncounted")}).map(a=>{const[u,h]=a;let v=null;return t.tooltip&&(v=be(h,t)),[u,v]}):[]},W=F.getStack,Y=(r,t,e,i)=>{if(r.type==="resize"){r.currentSlide=t.getCurrentSlide();const u=t.getIndices();r.indexv=u.v}const o=r.currentSlide,s=Se(o,i);if(s.length<2){e.classList.remove("visible"),e.innerHTML="";return}const n=W(o),a=r.previousSlide?W(r.previousSlide):null;!r.previousSlide||n!==a?ve(r,e,s,t,i):V(r,e,t)};class A{deck;config;colors;theVerticator=null;currentSlide=null;constructor(t,e){this.deck=t,this.config=e,this.colors={theme:"",themeregular:"",themeinverse:"",verticatorregular:"",verticatorinverse:""}}static async create(t,e){await new A(t,e).initialize()}async initialize(){this.setupVerticator(),this.theVerticator&&(this.colors=H(this.theVerticator,this.deck.getRevealElement(),this.config),B(this.deck,this.theVerticator,this.config),ge(this.theVerticator,this.deck,this.colors,this.config),_.addMoreDirectionEvents(this.deck),_.addScrollModeEvents(this.deck),this.addEventListeners())}setupVerticator(){this.theVerticator=me(this.deck,this.config);const t=this.deck.getRevealElement();this.theVerticator&&(H(this.theVerticator,t,this.config),B(this.deck,this.theVerticator,this.config))}addEventListeners(){this.deck.on("slidechanged-h",t=>{if(!this.theVerticator)return;const e=t;e.currentSlide!==this.currentSlide&&(Y(e,this.deck,this.theVerticator,this.config),x(e,this.theVerticator,this.deck,this.colors,this.config),this.currentSlide=e.currentSlide)}),this.deck.on("slidechanged-v",t=>{if(!this.theVerticator)return;const e=t;e.currentSlide!==this.currentSlide&&(V(e,this.theVerticator,this.deck),x(e,this.theVerticator,this.deck,this.colors,this.config),this.currentSlide=e.currentSlide)}),this.deck.on("scrollmode-exit",t=>{if(!this.theVerticator)return;const e=t;Y(e,this.deck,this.theVerticator,this.config),x(e,this.theVerticator,this.deck,this.colors,this.config),this.currentSlide=e.currentSlide})}}const Z="verticator",Ce=async(r,t,e)=>{C&&e.debug&&C.initialize(!0,Z),await ne(r,e),await A.create(t,e)};return()=>new re(Z,Ce,I).createInterface()}));
